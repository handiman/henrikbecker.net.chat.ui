import{r as e,h as t}from"./p-B_wcSKyM.js";const a=':host{display:block;font-family:system-ui, sans-serif;max-width:600px;margin:2rem auto;padding:1rem;box-sizing:border-box;--chat-accent:#333;--chat-accent-hover:#555;--chat-bg:#f9f9f9;--chat-border:#ccc;--chat-radius:4px;--chat-font-size:1rem}.input-wrapper{display:flex;align-items:center;gap:0.5rem}input[part="input"]{flex:1;padding:0.5rem 0.75rem;font-size:var(--chat-font-size);border:1px solid var(--chat-border);border-radius:var(--chat-radius)}button.ask-button{background:var(--chat-accent);color:white;border:none;border-radius:var(--chat-radius);font-size:1.2rem;padding:0.4rem 0.6rem;cursor:pointer;transition:background 0.2s ease}button.ask-button:hover{background:var(--chat-accent-hover)}button.ask-button:disabled{opacity:0.5;cursor:not-allowed}[part="response"]{margin-top:1rem;padding:0.75rem;background:var(--chat-bg);border-left:4px solid var(--chat-accent);border-radius:var(--chat-radius)}.confidence{display:inline-block;margin-top:0.5rem;font-size:0.85rem;font-weight:bold;padding:0.2rem 0.4rem;border-radius:3px;background:#eee}.confidence.faktabaserat{background:#d0f0d0;color:#2b7a2b}.confidence.tolkning{background:#fdf0c0;color:#a67c00}.confidence.kreativ{background:#f0d0f0;color:#7a2b7a}.spinner{display:inline-block;width:1.2rem;height:1.2rem;animation:spin 0.8s linear infinite}button img{width:16px;height:16px}@keyframes spin{to{transform:rotate(360deg)}}';const i=class{constructor(t){e(this,t);this.collection="";this.placeholder="Ask my CV bot anything...";this.error="Something went wrong while contacting my brain.";this.answerPosition="below";this.question="";this.answer="";this.confidence="";this.promptGuard="";this.chunks=[];this.loading=false;this.minimized=false}async handleAsk(){if(!this.question.trim())return;this.loading=true;this.answer="";this.confidence="";this.promptGuard="";this.chunks=[];try{const e=await fetch("https://henrikbecker.azurewebsites.net/ai/ask/"+this.collection,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.question)});const t=await e.json();this.answer=t.answer;this.confidence=t.confidence;this.promptGuard=t.promptGuard;this.chunks=t.chunks;this.logDebug(this.question,t)}catch(e){this.answer=e+" "+this.error}this.loading=false}logDebug(e,t){console.groupCollapsed(`ðŸ’¬ ${e}`);console.log("ðŸ§© PromptGuard:",t.promptGuard);console.log("ðŸ“š Chunks:",t.chunks);console.log("ðŸŽ¯ Confidence:",t.confidence);console.log("ðŸ§  Response Type:",this.extractResponseType(t.answer));console.log("ðŸ§  Original Question:",e);console.groupEnd()}extractResponseType(e){if(e.includes("Faktabaserat"))return"Faktabaserat";if(e.includes("Tolkning"))return"Tolkning";if(e.includes("Kreativ"))return"Kreativ extrapolering";return"OkÃ¤nt"}handleKeyDown(e){if(e.key==="Enter"){e.preventDefault();this.handleAsk()}}toggleMinimize(){this.minimized=!this.minimized}render(){return t("div",{key:"760d85224a7074a5d604c2267e6f30e3f267ae69",part:"container"},!this.minimized&&this.answerPosition=="above"&&this.answer&&t("div",{key:"949191aa1eba97c8a33bf40091a702762f0e90ff",part:"response"},t("div",{key:"751b234237030c3dd78b2151be3328b851989aa7",class:"chat-header"},t("button",{key:"8127ad8fcc10232914d525f75d25aa7e6eb56c5e",class:"minimize",onClick:()=>this.toggleMinimize()},this.minimized?"â–²":"â–¼")),t("p",{key:"bbcd449a5c9c0faf2aeb589520cf002621db683f"},this.answer),t("span",{key:"6173f4a7c13793859b449ee6857078c40ae5a5e2",part:"confidence",class:`confidence ${this.confidence.toLowerCase()}`},this.confidence)),t("div",{key:"61770e86e11d6d28b87e40add5ba48a0748a2359",class:"input-wrapper"},t("input",{key:"3850910fa3a42bb6171616b34ade744ea3ca0801",id:"question",part:"input",type:"text",value:this.question,onInput:e=>this.question=e.target.value,onKeyDown:e=>this.handleKeyDown(e),placeholder:this.placeholder}),t("button",{key:"d02be2314031dcacf3483507a27ccf6430e0a154",part:"icon-button",class:"ask-button",onClick:()=>this.handleAsk(),disabled:this.loading,title:"Ask"},this.loading?t("img",{src:"/favicon.ico",class:"spinner"}):t("img",{src:"/favicon.ico"}))),!this.minimized&&this.answerPosition=="below"&&this.answer&&t("div",{key:"d2dea9ed6bd095b38cf59475360ff0713ff13d7b",part:"response"},t("div",{key:"bf2dd244ba92f869f9bbaa6acf30d1e1f5dc49d6",class:"chat-header"},t("button",{key:"9fc61564b832409f8a4bd47f414a41c5034e6737",class:"minimize",onClick:()=>this.toggleMinimize()},this.minimized?"â–²":"â–¼")),t("p",{key:"f94da084e6da20d596cfa6cec7985cfb3c6c96f4"},this.answer),t("span",{key:"f1b9d68f79e97b3fc151c590449967f9e37bdaa6",part:"confidence",class:`confidence ${this.confidence.toLowerCase()}`},this.confidence)))}};i.style=a;export{i as cv_chat};
//# sourceMappingURL=p-c7d4b0bf.entry.js.map